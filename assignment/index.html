<!DOCTYPE html>
<html>
  <head>
    <!--stylesheet imports (these allow us to import and use style definitions from other files)-->
    <link rel="stylesheet" href="leaflet.css" />
  </head>
  <body>
    <!--left panel-->
    <div id = "sidebar" style="position: absolute; left: 0px; width: 400px; top: 0; bottom: 0;">
      <h1 id = "title"> SEPTA's Bus Network </h1>
      <p id = "route"> </p>
      <p id = "region"> </p>
      <p id = "description"> In a city with less rail coverage than other cities of similar size, buses are an especially integral part of SEPTA's system.  </p>
      <button id="nextButton"> next </button>
    </div>
    <!--map-->
    <div id="map" style="position: absolute; right: 0; left: 400px; top: 0; bottom: 0;"></div>

    <!--javascript imports (these allow us to bring in javascript files we want to take advantage of in our code)-->
    <script src="leaflet.js"></script>
    <!--The code below defines and generates the map-->
    <!--START HERE (note the script tag)-->
    <script>
      var map = L.map('map', {
        center: [39.9522, -75.1639],
        zoom: 14
      });

      var Stamen_TonerLite = L.tileLayer('http://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.{ext}', {
        attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
        subdomains: 'abcd',
        minZoom: 0,
        maxZoom: 20,
        ext: 'png'
      }).addTo(map);

      var drawnRoutes = L.polyline(routes).addTo(map);

    </script>

    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"></script>
    <!-- <script src="../data/routes.js"></script> -->
    <script src="/js/leaflet-0.7.2/leaflet.ajax.min.js"></script>

    <script>
      var marketsLayer = new L.GeoJSON.AJAX("Farmers_Markets.geojson");       
      marketsLayer.addTo(map);
    </script>



    <script>
      var slides = [
        {title: "Filling in Gaps Left by Rail",
        route: "60",
        region: "North Central Philadelphia",
        description: "Buses provide important movement contra to the direction of our rail lines, eg North-South movement in West Philly and East-West movement on the other side of the Schuykill river. Some of the direct East-West routes in North Philly have the highest bus ridership in the system."},
        {title: "Servicing Major Suburban Corridors",
        route: "120",
        region: "Delaware and Chester County",
        description: "In suburban counties, buses fan out along major corridors, providing coverage service, connecting people to jobs clustered in suburban office parks, and providing service to some denser places in our suburbs, such as Norristown and Chester.",
        },
        {title: "Dense Urban Neighborhoods Unserved by Heavy Rail",
        route: "18",
        region: "Northwest Philadelphia",
        description: "Many dense areas of Philadelphia itself are not served by trains at all. In North Philly, the MFL and BSL both terminate before the city line, leaving large portions of dense urban neighborhoods unserved by rail. At these stations, many riders transfer to buses to complete their trip.
      At Olney Transportation Center, bus ridership is 86% percent of rail ridership."},
      {title: "Bus Ridership Surpasses Rail!",
      route: "58",
      region: "Northeast Philadelphia",
      description: "At Frankford Transportation Center, the terminus of the MFL, bus ridership even outperforms
      rail. Buses saw 37,845 boardings at FTC compared to 34,358 for the MFL."},
      ]
    // <!--END HERE (again, note the script tag)-->

    var currentSlide = 0

    var loadSlide = function(slide) {
    //change page
    $('#title').text(slide.title)
    $('#route').text(slide.route)
    $('#region').text(slide.region)
    $('#description').text(slide.description)
    }

    var next = function() {
      if (currentSlide == slides.length -1) {
    } else {
    $('#nextButton').show()
    currentSlide = currentSlide +1
    loadSlide(slides[currentSlide])
    }
    if (currentSlide == slides.length -1) {
    $('#nextButton').hide()
    }}


    $('#nextButton').click(function(e) {
    //needs to load the next slide
    next()
    });

    </script>

</body>
</html>
